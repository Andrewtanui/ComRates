@model TanuiApp.ViewModels.ProductCreateViewModel
@{
  ViewBag.Title = "Edit Product";
}
<div class="container py-4">
  <div class="row justify-content-center">
    <div class="col-md-8">
      <div class="card shadow-lg border-0">
        <div class="card-header bg-primary text-white">
          <h3 class="mb-0"><i class="bi bi-pencil-square me-2"></i> Edit Product</h3>
        </div>
        <div class="card-body">
          <form asp-action="Edit" method="post" enctype="multipart/form-data">
            @if (ViewBag.ProductId != null)
            {
              <input type="hidden" name="id" value="@ViewBag.ProductId" />
            }
            <div class="mb-3">
              <label asp-for="Name" class="form-label fw-bold"></label>
              <input asp-for="Name" class="form-control rounded-pill" placeholder="Product Name" />
              <span asp-validation-for="Name" class="text-danger"></span>
            </div>
            <div class="mb-3">
              <label asp-for="Description" class="form-label fw-bold"></label>
              <textarea asp-for="Description" class="form-control rounded" rows="3"
                placeholder="Product Description"></textarea>
              <span asp-validation-for="Description" class="text-danger"></span>
            </div>
            <div class="row mb-3">
              <div class="col-md-6">
                <label asp-for="Price" class="form-label fw-bold"></label>
                <input asp-for="Price" class="form-control rounded-pill" placeholder="Price" />
                <span asp-validation-for="Price" class="text-danger"></span>
              </div>
              <div class="col-md-6">
                <label asp-for="Category" class="form-label fw-bold"></label>
                <input asp-for="Category" class="form-control rounded-pill" placeholder="Category" />
                <span asp-validation-for="Category" class="text-danger"></span>
              </div>
            </div>
            <div class="mb-3">
              <label asp-for="Quantity" class="form-label fw-bold"></label>
              <input asp-for="Quantity" class="form-control rounded-pill" placeholder="Quantity" />
              <span asp-validation-for="Quantity" class="text-danger"></span>
            </div>
            <div class="mb-4">
              <label class="form-label fw-bold">Existing Images</label>
              <div class="d-flex flex-wrap gap-2">
                @if (ViewBag.ExistingImages != null)
                {
                  var images = (List<string>)ViewBag.ExistingImages;
                  foreach (var img in images)
                  {
                    <div class="border rounded p-1 bg-light">
                      <img src="@img" alt="Product Image" style="max-width:100px; max-height:100px; object-fit:cover;"
                        class="shadow-sm" />
                    </div>
                  }
                }
              </div>
            </div>
            <div class="mb-4">
              <label class="form-label fw-bold">Upload New Images <span class="text-muted">(max 5)</span></label>
              <input type="file" name="ImageFiles" multiple class="form-control" accept="image/*" />
            </div>
            <div class="d-flex justify-content-between">
              <button type="submit" class="btn btn-success px-4 rounded-pill shadow">Save Changes</button>
              <a asp-action="MyListings" asp-controller="Profile"
                class="btn btn-outline-secondary px-4 rounded-pill">Cancel</a>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>
@section Scripts {
  @{
    await Html.RenderPartialAsync("_ValidationScriptsPartial");
  }
}